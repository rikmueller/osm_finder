services:
  alonggpx:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: alonggpx-web
    ports:
      - "5000:5000"
    environment:
      - FLASK_ENV=production
      - FLASK_PORT=5000
      # AlongGPX environment variables (override config.yaml)
      - ALONGGPX_PROJECT_NAME=WebProject
      - ALONGGPX_RADIUS_KM=5
      - ALONGGPX_BATCH_KM=50
      - ALONGGPX_OVERPASS_RETRIES=3
      - ALONGGPX_TIMEZONE=Europe/Berlin
    volumes:
      # GPX input files (mount local data/input directory from parent)
      - ../data/input:/app/data/input:ro
      # Output directory for Excel and HTML results
      - ../data/output:/app/data/output:rw
      # Optional: mount config.yaml to override at runtime
      # - ../config.yaml:/app/config.yaml:ro
    restart: unless-stopped
    # Resource limits (adjust as needed)
